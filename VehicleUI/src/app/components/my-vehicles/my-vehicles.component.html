<div class="my-vehicles-container animate-fade-in">
    <mat-card class="glass-card table-card">
        <mat-card-header>
            <div class="header-content">
                <div>
                    <mat-card-title>My Vehicles</mat-card-title>
                    <mat-card-subtitle>Manage your fleet details</mat-card-subtitle>
                </div>
                <button mat-stroked-button color="primary" (click)="goBack()">
                    <mat-icon>arrow_back</mat-icon> Back
                </button>
            </div>
        </mat-card-header>

        <mat-card-content>
            <div class="table-responsive">
                <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 glass-table">

                    <!-- Vehicle Number Column -->
                    <ng-container matColumnDef="vehicleNumber">
                        <th mat-header-cell *matHeaderCellDef> Registration No. </th>
                        <td mat-cell *matCellDef="let element"> {{element.vehicleNumber}} </td>
                    </ng-container>

                    <!-- Brand Column -->
                    <ng-container matColumnDef="brand">
                        <th mat-header-cell *matHeaderCellDef> Brand </th>
                        <td mat-cell *matCellDef="let element"> {{element.brand}} </td>
                    </ng-container>

                    <!-- Model Column -->
                    <ng-container matColumnDef="model">
                        <th mat-header-cell *matHeaderCellDef> Model </th>
                        <td mat-cell *matCellDef="let element"> {{element.model}} </td>
                    </ng-container>

                    <!-- Year Column -->
                    <ng-container matColumnDef="year">
                        <th mat-header-cell *matHeaderCellDef> Year </th>
                        <td mat-cell *matCellDef="let element"> {{element.year}} </td>
                    </ng-container>

                    <!-- Type Column -->
                    <ng-container matColumnDef="vehicleType">
                        <th mat-header-cell *matHeaderCellDef> Type </th>
                        <td mat-cell *matCellDef="let element">
                            <span class="badge" [ngClass]="{
                                    'car': element.vehicleType === 'Car', 
                                    'bike': element.vehicleType === 'Bike',
                                    'truck': element.vehicleType === 'Truck'
                                }">
                                {{element.vehicleType}}
                            </span>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                    <!-- No Data Row -->
                    <tr class="mat-row" *matNoDataRow>
                        <td class="mat-cell" colspan="5" style="text-align: center; padding: 2rem;">
                            No vehicles found. <a routerLink="/customer/add-vehicle" style="color: #a5b4fc">Add one
                                now?</a>
                        </td>
                    </tr>
                </table>
            </div>

            <div *ngIf="loading" class="loading-spinner">
                <p>Loading vehicles...</p>
            </div>

        </mat-card-content>
    </mat-card>
</div>